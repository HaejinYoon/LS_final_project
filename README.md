# ⚡ 전기요금 예측 및 전력 모니터링 대시보드  
---

## 📘 프로젝트 개요

본 프로젝트는 **전력 사용량 데이터를 활용하여 전기요금을 예측**하고,  
이를 **시계열 분석 및 시각화 대시보드**로 제공하는 것을 목표로 합니다.

- **주제:** 전력 사용량·역률·작업유형 등의 피처를 기반으로 한 전기요금 예측  
- **목표:** MAE(Median Absolute Error) 최소화  
- **데이터:** 공장/산업체 단위 15분 간격 전력 사용량 시계열 데이터  
- **결과물:** 전력 사용 추세 분석, 피크 수요 진단, 자동 보고서 생성 기능이 포함된 Streamlit 대시보드

---

## 🧩 데이터 구성

| 파일명 | 설명 |
|--------|------|
| `train.csv` | 학습용 데이터 (전력사용량, 전기요금, 작업유형, 역률 등) |
| `test.csv` | 예측 대상 기간 데이터 |
| `sample_submission.csv` | 제출 형식 예시 |

**주요 컬럼 예시**

| 컬럼명 | 설명 |
|--------|------|
| `측정일시` | 전력 측정 시간 (15분 단위) |
| `전력사용량_kWh` | 구간별 전력 사용량 |
| `전력요금` | 해당 구간의 전기요금 (타깃 변수) |
| `역률` | 전력 효율 지표 |
| `작업유형` | 생산 / 휴식 / 점검 등 공정 상태 구분 |

---

## 🛠 사용 기술 (Tech Stack)

- **언어 & 라이브러리**
  - Python, NumPy, Pandas, Scikit-learn  
  - 시각화: Matplotlib, Plotly
- **모델링**
  - LightGBM, XGBoost, CatBoost, Histogram-GBR  
  - NeuralForecast 기반 시계열 딥러닝 모델 (N-HiTS / TFT, 실험용)
- **서비스 & 협업**
  - Streamlit (웹 대시보드)  
  - Git / GitHub (버전 관리 및 협업)

---

## 🔄 워크플로우

1. **데이터 수집 & 이해**  
   - 공장 15분 전력 사용·요금·역률·작업유형 데이터 구조 분석
2. **EDA & 전처리**  
   - 이상치/결측치 처리, 공정별·시간대별 사용 패턴 탐색
3. **피처 엔지니어링**  
   - 시간 피처: `hour`, `dayofweek`, `month`, `holiday`  
   - `sin/cos` 변환을 통한 주기성 인코딩(Fourier Features)  
   - 전력단가(원/kWh), 피크 수요, 일·주·월별 집계 통계 등 파생 변수 생성
4. **모델 학습 & 검증**  
   - `TimeSeriesSplit` 기반 시계열 검증 전략  
   - 구간별(예: 주간/야간/휴일) 모델 분리 학습  
   - LightGBM / XGBoost / CatBoost 성능 비교 후 **가중 앙상블(Hybrid Ensemble)** 구성
5. **대시보드 & 보고서**  
   - 예측 결과 및 주요 지표를 Streamlit 대시보드로 서비스  
   - 월별 요약 리포트를 Word 문서로 자동 생성

---

## 🤖 모델링 / 예측

- **목표 지표**
  - 타깃: 전력요금(원)  
  - 평가: **MAE(Median Absolute Error) 최소화**

- **검증 전략**
  - 11월 데이터를 검증 구간으로 고정  
  - `TimeSeriesSplit`으로 시계열 누적 검증 수행

- **모델 조합**
  - 개별 모델: LightGBM, XGBoost, CatBoost, HGBR  
  - 최종: 모델별 검증 MAE에 비례한 **가중 앙상블**

---

## 📊 Streamlit 대시보드

### 탭 구성

| 탭 | 설명 |
|----|------|
| **Tab1. 실시간 모니터링 / KPI** | 선택한 기간·공정에 대해 전력 사용량·요금·단가·피크 수요·역률 등을 KPI 카드와 시계열 그래프로 실시간 확인 |
| **Tab2. 통계 분석 / 보고서** | 월별·요일별·시간대별 통계 시각화, 공정·작업유형별 사용 패턴 분석, Word 형식의 요약 보고서 자동 생성 |
| **Tab3. 부록 (EDA / 모델링)** | 원본 EDA 결과, 피처 엔지니어링 과정, 모델별 성능 비교 및 하이퍼파라미터 설정 등 분석·모델링 과정 정리 |

### 주요 기능

- **실시간 KPI 모니터링**  
  Tab1에서 기간·공정·작업유형을 선택하면 전력 사용량, 요금, 단가, 피크 수요, 역률을  
  KPI 카드와 라인 차트로 즉시 확인할 수 있음

- **통계 분석 및 보고서 생성**  
  Tab2에서 월별·요일별·시간대별 전력 사용 패턴을 히트맵/바 차트 등으로 시각화하고,  
  선택한 기간에 대한 주요 지표와 그래프를 Word 문서(`.docx`) 형식의 보고서로 자동 생성

- **EDA / 모델링 과정 조회**  
  Tab3에서 데이터 전처리 및 EDA 결과, 피처 리스트, 모델별 MAE 비교,  
  최종 앙상블 구성 이유 등을 표와 그래프로 정리해 참고용 부록 형태로 제공

  ---

## 🧠 향후 개선 계획

- LSTM 기반 시계열 모델 추가  
- 전력요금제별 세분화 반영  
- 이상치 탐지 및 알림 기능 추가  

---

## 🏷️ 저자 및 라이선스

- **Project Owner:** LSBS Main Project 3 Team 4
- **Team Members:** 도호현, 안형엽, 오윤서, 윤해진  
- **License:** MIT License  
