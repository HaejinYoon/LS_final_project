# ⚡ LSBS_Main_Project3_Electricity_Fare_Prediction  
---

## 📘 프로젝트 개요

본 프로젝트는 **전력 사용량 데이터를 활용하여 전기요금을 예측**하고,  
이를 **시계열 분석 및 시각화 대시보드**로 제공하는 것을 목표로 합니다.

- **주제:** 전력 사용량·역률·작업유형 등의 피처를 기반으로 한 전기요금 예측  
- **목표:** MAE(Median Absolute Error) 최소화  
- **데이터:** 공장/산업체 단위 15분 간격 전력 사용량 시계열 데이터  
- **결과물:** 전력 사용 추세 분석, 피크 수요 진단, 자동 보고서 생성 기능이 포함된 Streamlit 대시보드

---

## 🧩 데이터 구성

| 파일명 | 설명 |
|--------|------|
| `train.csv` | 학습용 데이터 (전력사용량, 전기요금, 작업유형, 역률 등) |
| `test.csv` | 예측 대상 기간 데이터 |
| `sample_submission.csv` | 제출 형식 예시 |

**주요 컬럼 예시**

| 컬럼명 | 설명 |
|--------|------|
| `측정일시` | 전력 측정 시간 (15분 단위) |
| `전력사용량_kWh` | 구간별 전력 사용량 |
| `전력요금` | 해당 구간의 전기요금 (타깃 변수) |
| `역률` | 전력 효율 지표 |
| `작업유형` | 생산 / 휴식 / 점검 등 공정 상태 구분 |

---

## 🛠 사용 기술 (Tech Stack)

- **언어 & 라이브러리**
  - Python, NumPy, Pandas, Scikit-learn  
  - 시각화: Matplotlib, Plotly
- **모델링**
  - LightGBM, XGBoost, CatBoost, Histogram-GBR  
  - NeuralForecast 기반 시계열 딥러닝 모델 (N-HiTS / TFT, 실험용)
- **서비스 & 협업**
  - Streamlit (웹 대시보드)  
  - Git / GitHub (버전 관리 및 협업)

---

## 🔄 워크플로우

1. **데이터 수집 & 이해**  
   - 공장 15분 전력 사용·요금·역률·작업유형 데이터 구조 분석
2. **EDA & 전처리**  
   - 이상치/결측치 처리, 공정별·시간대별 사용 패턴 탐색
3. **피처 엔지니어링**  
   - 시간 피처: `hour`, `dayofweek`, `month`, `holiday`  
   - `sin/cos` 변환을 통한 주기성 인코딩(Fourier Features)  
   - 전력단가(원/kWh), 피크 수요, 일·주·월별 집계 통계 등 파생 변수 생성
4. **모델 학습 & 검증**  
   - `TimeSeriesSplit` 기반 시계열 검증 전략  
   - 구간별(예: 주간/야간/휴일) 모델 분리 학습  
   - LightGBM / XGBoost / CatBoost 성능 비교 후 **가중 앙상블(Hybrid Ensemble)** 구성
5. **대시보드 & 보고서**  
   - 예측 결과 및 주요 지표를 Streamlit 대시보드로 서비스  
   - 월별 요약 리포트를 Word 문서로 자동 생성

---

## 🤖 모델링 / 예측

- **목표 지표**
  - 타깃: 전력요금(원)  
  - 평가: **MAE(Median Absolute Error) 최소화**

- **검증 전략**
  - 11월 데이터를 검증 구간으로 고정  
  - `TimeSeriesSplit`으로 시계열 누적 검증 수행

- **모델 조합**
  - 개별 모델: LightGBM, XGBoost, CatBoost, HGBR  
  - 최종: 모델별 검증 MAE에 비례한 **가중 앙상블**

---

## 📊 Streamlit 대시보드

### 탭 구성

| 탭 | 설명 |
|----|------|
| **Tab1. 주요 지표 요약** | 기간별 전력 사용량·요금·단가·피크 수요를 KPI 카드와 그래프로 표시 |
| **Tab2. 상세 분석 / 보고서** | 요일·시간대·작업유형별 사용 패턴, 역률 분석, 피크 구간 시각화, Word 보고서 자동 생성 |
| **Tab3. 요금 예측 결과** | 예측 vs 실제 비교, 모델별 예측값 비교, CSV 다운로드 기능 제공 |

### 주요 기능

- **실시간 모니터링**  
  선택한 기간/공정에 대해 전력 사용량, 요금, 단가, 역률, 피크 수요를 한 화면에서 조회
- **피크 진단**  
  시간대·요일별 피크 발생 구간 하이라이트 및 기준선 초과 구간 색상 경고
- **자동 보고서 생성**  
  한 달 단위 **주요 지표 요약 + 그래프**를 Word 문서(`.docx`)로 자동 생성하여  
  관리자가 바로 보고용으로 활용 가능

---

## 👤 나의 역할 (Team of 4)

- **팀장**
  - 문제 정의, 분석 방향 설정, 전체 일정 및 협업 관리
- **데이터 분석 & 피처 엔지니어링**
  - 이상치·결측치 처리, 시간·공정·역률 기반 피처 설계  
  - 전력단가 및 피크 관련 파생 변수 설계
- **모델링**
  - LightGBM / XGBoost / CatBoost 튜닝 및 가중 앙상블 구성  
  - `TimeSeriesSplit` 기반 검증 전략 설계 및 MAE 기준 최적 모델 선정
- **대시보드 기획·구현**
  - 대시보드 화면 구조 설계 (탭 구성, KPI 카드, 그래프 레이아웃)  
  - Streamlit 앱 주요 기능(필터, 그래프, 보고서 생성) 구현 및 사용성 테스트

---

## 🚀 실행 방법

```bash
# 1. 가상환경 생성 및 라이브러리 설치
conda create -n elec python=3.10
conda activate elec
pip install -r requirements.txt

# 2. 대시보드 실행
cd dashboard
streamlit run app.py
